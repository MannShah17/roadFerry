<%- contentFor('HeaderCss') %> <%- contentFor('breadcrumb') %>
<ul class="list-inline menu-left mb-0">
  <li class="list-inline-item">
    <button type="button" class="button-menu-mobile open-left waves-effect">
      <i class="ion-navicon"></i>
    </button>
  </li>
  <li class="hide-phone list-inline-item app-search">
    <h3 class="page-title">Add Vehicle Type</h3>
  </li>
</ul>
<style>
  #overlay {	
    position: fixed;
    top: 0;
    z-index: 100;
    width: 80%;
    height: 100%;
    display: none;
    background: rgba(199, 197, 197, 0.6);
  }
  .cv-spinner {
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;  
  }
  .spinner {
    width: 40px;
    height: 40px;
    border: 4px #ddd solid;
    border-top: 4px #2e93e6 solid;
    border-radius: 50%;
    animation: sp-anime 0.8s infinite linear;
  }
  @keyframes sp-anime {
    100% { 
      transform: rotate(360deg); 
    }
  }
  .is-hide {
    display: none;
  }
</style>
<%- contentFor('body') %>
<div class="page-content-wrapper">
  <div id="overlay">
    <div class="cv-spinner">
      <span class="spinner"></span>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <div class="card m-b-20">
          <div class="card-body">
            <h4 class="mt-0 header-title">
              Add a new vehicle type to the system.
            </h4>
            <br /><br />
            <% include ../Partials/errorMessages %>
            <form
              method="POST"
              class="form-horizontal"
              enctype="multipart/form-data"
            >
              <div class="form-group row">
                <label for="vehicleTypeName" class="col-sm-2 col-form-label">Vehicle Type Name</label>
                <div class="col-sm-10">
                  <input
                    class="form-control"
                    type="text"
                    id="vehicleTypeName"
                    name="name"
                    placeholder="Enter the Name of the Vehicle"
                    required
                  />
                </div>
              </div>

              <div class="form-group row">
                <label for="vehicleCapacity" class="col-sm-2 col-form-label">Capacity</label>
                <div class="col-sm-10">
                  <input
                    class="form-control"
                    type="text"
                    id="vehicleCapacity"
                    name="capacity"
                    placeholder="Enter the capacity of the vehicle"
                  />
                  <div>
                    <small class="form-text text-muted">Please enter capacity in tons.</small>
                  </div>
                </div>
              </div>

              <div class="form-group row">
                <label for="vehicleRadius" class="col-sm-2 col-form-label">Radius</label>
                <div class="col-sm-10">
                  <input
                    class="form-control"
                    type="text"
                    id="vehicleRadius"
                    name="radius"
                    placeholder="Enter the radius of the vehicle"
                  />
                  <div>
                    <small class="form-text text-muted">Please enter radius in km.</small>
                  </div>
                </div>
              </div>

              <div class="form-group row">
                <label class="col-sm-2 col-form-label">Dimensions</label>
                <div class="col-sm-10">
                  <div class="input-group bootstrap-touchspin bootstrap-touchspin-injected">
                    <span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">
                      <span class="input-group-text">Length</span>
                    </span>
                    <input
                      class="form-control"
                      type="text"
                      id="vehicleLength"
                      name="vehicleLength"
                      placeholder="Enter vehicle's Length"
                    />
                    &nbsp;
                    <span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">
                      <span class="input-group-text">Width</span>
                    </span>
                    <input
                      class="form-control"
                      type="text"
                      id="vehicleWidth"
                      name="vehicleWidth"
                      placeholder="Enter vehicle's Width"
                    />
                    &nbsp;
                    <span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">
                      <span class="input-group-text">Height</span>
                    </span>
                    <input
                      class="form-control"
                      type="text"
                      id="vehicleHeight"
                      name="vehicleHeight"
                      placeholder="Enter vehicle's Height"
                    />
                  </div>
                  <div>
                    <small class="form-text text-muted">Please enter dimensions in feet.</small>
                  </div>
                </div>
              </div>

              <div class="form-group row">
                <label for="vehicleIcons" class="col-sm-2 col-form-label">Images</label>
                <div class="col-sm-10">
                  <input type="file" id="vehicleIcons" name="icons" />
                </div>
              </div>

              <div class="form-group row">
                <label for="vehicleTypeName" class="col-sm-2 col-form-label">Minimum Rate</label>
                <div class="col-sm-10">
                  <input
                    class="form-control"
                    type="number"
                    id="minimumRate"
                    name="minimumRate"
                    value="5000"
                    required         
                  />
                </div>
              </div>

              <div class="form-group row">
                <button
                  id="btnRates"
                  type="button"
                  class="col-sm-2 col-form-label btn btn-outline-secondary btn-sm waves-effect"
                >
                  Add Rates
                </button>
              </div>
              <div id="error" style="color: red; margin-left: 160px;">
                <div id="errormessage"></div>
              </div>
              <div style="display: none" class="form-group row" id="div_rate" name="rates[]">
                <label class="col-sm-2 col-form-label">Rates</label>
                <div class="col-sm-10 rates_input_div">
                  <div>
                    <div class="input-group bootstrap-touchspin bootstrap-touchspin-injected">
                      <span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">
                        <span class="input-group-text">Start</span>
                      </span>
                      <input
                        id="kmFrom"
                        class="form-control km-from"
                        type="text"
                        name="kmFrom"
                        placeholder="Enter Kilometer"
                      />
                      &nbsp;
                      <span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">
                        <span class="input-group-text">End</span>
                      </span>
                      <input
                        id="kmTo"
                        class="form-control km-to"
                        type="text"
                        name="kmTo"
                        placeholder="Enter Kilometers"
                      />
                      &nbsp;
                      <span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">
                        <span class="input-group-text">Price</span>
                      </span>
                      <input
                        id="price"
                        class="form-control"
                        type="text"
                        name="price"
                        placeholder="Enter price"
                      />
                      &nbsp;
                    </div>
                    <br />
                    <div id="checkk">
                      <div id="checkdiv">
                        <label class="col-sm-0">Onwards</label>
                        <input
                          type="hidden"
                          id="chbPriceHidden"
                          value="unchecked"
                          class="chb_rate_default"
                        />
                        <input
                          type="checkbox"
                          id="chbPrice"
                          value="checked"
                          class="chb_rate_default"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <button
                  id="btnAddRate"
                  type="button"
                  class="btn btn-success btn-sm waves-effect add_more_rate"
                >
                  Add
                </button>
              </div>

              <button
                id="addvehicle"
                type="submit"
                title="Please Check Onwards Value"
                value="hover me please"
                class="btn btn-primary btn-group waves-effect"
              >
                Add Vehicle
              </button>

              <button
                id="btnCancel"
                name="btnCancel"
                type="button"
                class="btn btn-danger btn-group waves-effect"
                onclick="location.href='/dashboard'"
              >
                Cancel
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<%- contentFor('FooterJs') %> <%- contentFor('BottomJs') %>
<script>
  var $loading = $('#overlay').hide();
  $(document)
    .ajaxStart(function () {
      $loading.show();
    })
    .ajaxStop(function () {
      $loading.hide();
    });

  $(function () {
    $('#btnRates').click(function () {
      $('#div_rate').show();
      $(this).hide();
    });
    $('#btnAddRate').click(function () {
      add_rate_html();
    });
  });

  function add_rate_html() {
    let html =
      '<div class="input-group bootstrap-touchspin bootstrap-touchspin-injected">' +
      '<span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">' +
      '<span class="input-group-text">Start</span>' +
      '</span>' +
      '<input id="kmFrom" class="form-control km-from" type="text" name="kmFrom" placeholder="Enter Kilometer" />' +
      '&nbsp;' +
      '<span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">' +
      '<span class="input-group-text">End</span>' +
      '</span>' +
      '<input id="kmTo" class="form-control km-to" type="text" name="kmTo" placeholder="Enter Kilometers" />' +
      '&nbsp;' +
      '<span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend">' +
      '<span class="input-group-text">Price</span>' +
      '</span>' +
      '<input id="price" class="form-control" type="text" name="price" placeholder="Enter price" />' +
      '&nbsp;' +
      '</div>' +
      '<br />' +
      '<div id="checkk">' +
      '<div id="checkdiv">' +
      '<label class="col-sm-0">Onwards</label>' +
      '<input type="hidden" id="chbPriceHidden" value="unchecked" class="chb_rate_default" />' +
      '<input type="checkbox" id="chbPrice" value="checked" class="chb_rate_default" />' +
      '</div>' +
      '</div>';
    $('.rates_input_div').append(html);
  }

  $('#addvehicle').click(function () {
    let checked = true;
    $('.chb_rate_default').each(function (index, element) {
      var $element = $(element);
      if ($element.is(':checked')) {
        $(element).siblings(':hidden').val('checked');
      }
    });
    $('.km-from').each(function (index, element) {
      var $element = $(element);
      if ($element.val() == '') {
        checked = false;
        $('#errormessage').html('Please Enter KM from value');
      }
    });
    $('.km-to').each(function (index, element) {
      var $element = $(element);
      if ($element.val() == '') {
        checked = false;
        $('#errormessage').html('Please Enter KM To value');
      }
    });
    $('.price').each(function (index, element) {
      var $element = $(element);
      if ($element.val() == '') {
        checked = false;
        $('#errormessage').html('Please Enter Price');
      }
    });
          // Validate radius
      //     if (!validateRadius()) {
      //   checked = false;
      // }
    return checked;
  });
</script>
